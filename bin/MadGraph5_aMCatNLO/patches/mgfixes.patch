diff -ur old/MG5_aMC_v2_2_1/madgraph/various/cluster.py ./MG5_aMC_v2_2_1/madgraph/various/cluster.py
--- old/MG5_aMC_v2_2_1/madgraph/various/cluster.py      2014-09-25 16:56:11.000000000 +0200
+++ ./MG5_aMC_v2_2_1/madgraph/various/cluster.py        2014-09-26 02:09:13.305419805 +0200
@@ -1304,6 +1304,8 @@
         if log is None:
             log = '/dev/null'
         
+        text += 'if [ -n $CMSSW_BASE ]; then cd $CMSSW_BASE; eval `scramv1 runtime -sh`; cd -; fi;'           
+        
         text += prog
         if argument:
             text += ' ' + ' '.join(argument)
diff -ur old/MG5_aMC_v2_2_1/Template/LO/bin/internal/Gridpack/run.sh ./MG5_aMC_v2_2_1/Template/LO/bin/internal/Gridpack/run.sh
--- old/MG5_aMC_v2_2_1/Template/LO/bin/internal/Gridpack/run.sh 2014-09-25 16:56:11.000000000 +0200
+++ ./MG5_aMC_v2_2_1/Template/LO/bin/internal/Gridpack/run.sh   2014-09-26 02:14:50.115432890 +0200
@@ -78,37 +78,5 @@
     cd ..
 fi
 
-if [[ -e ./DECAY/decay ]]; then
-    cd DECAY
-    echo -$seed > iseed.dat
-    for ((i = 1 ;  i <= 20;  i++)) ; do
-       if [[ -e decay_$i\.in ]]; then
-           echo "Decaying events..."
-           mv ../events.lhe ../events_in.lhe
-           ./decay < decay_$i\.in
-       fi
-    done
-    cd ..
-fi
-
-if [[ -e ./REPLACE/replace.pl ]]; then
-    for ((i = 1 ;  i <= 20;  i++)) ; do
-       if [[ -e ./REPLACE/replace_card$i\.dat ]];then
-           echo "Adding flavors..."
-           mv ./events.lhe ./events_in.lhe
-           cd ./REPLACE
-           ./replace.pl ../events_in.lhe ../events.lhe < replace_card$i\.dat
-           cd ..
-       fi
-    done
-fi
-
-# part added by Stephen Mrenna to correct the kinematics of the replaced
-#  particles
-if [[ -e ./madevent/bin/internal/addmasses.py ]]; then
-  mv ./events.lhe ./events.lhe.0
-  python ./madevent/bin/internal/addmasses.py ./events.lhe.0 ./events.lhe
-fi  
-
 gzip -f events.lhe
 exit
diff -ur orig/MG5_aMC_v2_2_1/MadSpin/decay.py MG5_aMC_v2_2_1/MadSpin/decay.py
--- orig/MG5_aMC_v2_2_1/MadSpin/decay.py        2014-09-25 16:56:11.000000000 +0200
+++ MG5_aMC_v2_2_1/MadSpin/decay.py     2014-10-02 18:28:47.000000000 +0200
@@ -2160,10 +2160,11 @@
                 stdin_text+=p_str
                 # here I also need to specify the Monte Carlo Masses
                 stdin_text+=" %s \n" % nb_mc_masses
+                                 
+                decay = self.all_ME[production_tag]['decays'][0]
+                decay_me=self.all_ME.get_decay_from_tag(production_tag, decay['decay_tag'])
+                mepath = decay_me['path']
                 
-                mepath = self.all_ME[production_tag]['path']
-                mepath = mepath.replace('production_me','full_me');
-                                
                 trial_nb, BWvalue, weight, momenta, failed, use_mc_masses, helicities = self.loadfortran( 'unweighting', mepath, stdin_text)
                                 
                 self.reset_helicityonly_in_prod_event(event_map, helicities)
